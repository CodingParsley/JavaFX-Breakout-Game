package application;
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

import javafx.application.Application;
import javafx.stage.Stage;

public class TheController extends Application{
	BoardModel bm;
	TheView view;
	ScheduledThreadPoolExecutor executor;
	@Override
	public void start(Stage primaryStage) throws Exception {
		bm = new BoardModel();
		executor = new ScheduledThreadPoolExecutor(5);
		Runnable onPaddleLeft = new MovePaddleLeft();
        Runnable onPaddleRight = new MovePaddleRight();
        view = new TheView(onPaddleLeft,onPaddleRight, bm.getWidth(), bm.getHeight());
		view.start(primaryStage);
		executor.scheduleAtFixedRate(new Update(), 20L, 15, TimeUnit.MILLISECONDS);
	}
	class MovePaddleLeft implements Runnable{
		@Override
		public void run() {
			bm.movePaddleLeft();
			view.drawBat(bm.getBat());
		}
	}

	class MovePaddleRight implements Runnable{
		@Override
		public void run() {
			bm.movePaddleRight();
			view.drawBat(bm.getBat());
		}
	}
	class Update implements Runnable{

		@Override
		public void run() {
			view.drawBall(bm.getBall());
			bm.update();
		}

	}

	public static void main(String[] args){
		launch(args);
	}

}
