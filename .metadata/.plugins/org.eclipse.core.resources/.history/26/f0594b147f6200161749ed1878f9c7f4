package gameComponents;

public class Ball extends Rectangle {
	private double speed;
	private double angleOfMovement;
	private boolean shouldFlipX = false;
	private boolean shouldFlipY = false;
	private int xScore = 0;
	private int yScore = 0;
	private Brick brickItHit;
	private Ball yAdjustment;
	private Ball xAdjustment;
	private boolean hitBrick;
	private int brickCollisionCounter = 0;

	// For creating a brand new ball
	public Ball(Coordinate topLeft, double width, double height, double speed, double angleOfMovement,
			RectangleType type) {
		super(topLeft, width, height, type);
		this.speed = speed;
		this.angleOfMovement = angleOfMovement;
	}

	private Ball(Coordinate topLeft, double width, double height, double speed, double angleOfMovement, int id,
			RectangleType type) {
		super(topLeft, width, height, id, type);
		this.speed = speed;
		this.angleOfMovement = angleOfMovement;
	}

	private Ball(Coordinate topLeft, double width, double height, RectangleType type, boolean shouldFlipX,
			boolean shouldFlipY) {
		super(topLeft, width, height, type);
		this.shouldFlipX = shouldFlipX;
		this.shouldFlipY = shouldFlipY;
	}

	private Ball(Coordinate topLeft, double width, double height, RectangleType type, Brick brickItHit) {
		super(topLeft, width, height, type);
		this.brickItHit = brickItHit;
	}

	private Ball(Coordinate topLeft, double width, double height, RectangleType type, Ball yAdjustment,
			Ball xAdjustment) {
		super(topLeft, width, height, type);
		this.yAdjustment = yAdjustment;
		this.xAdjustment = xAdjustment;
	}

	private Ball(Coordinate topLeft, double width, double height, RectangleType type, boolean shouldFlipX,
			boolean shouldFlipY, int xScore, int yScore) {
		super(topLeft, width, height, type);
		this.shouldFlipX = shouldFlipX;
		this.shouldFlipY = shouldFlipY;
		this.xScore = xScore;
		this.yScore = yScore;
	}

	private Ball(Coordinate topLeft, double width, double height, RectangleType type, int xScore, int yScore) {
		super(topLeft, width, height, type);
		this.xScore = xScore;
		this.yScore = yScore;
	}

	public Ball shouldFlipX() {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.getType(), true,
				shouldFlipY);
	}

	public Ball shouldFlipY() {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.getType(), shouldFlipX,
				true);
	}

	public Ball setScore(int xScore, int yScore) {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.getType(), xScore, yScore);
	}

	public Ball setHitBrick(Brick brickItHit) {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.getType(), brickItHit);
	}

	public Ball setAdjustments(Ball yAdj, Ball xAdj) {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.getType(), yAdj, xAdj);
	}

	public Ball resetData() {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.getType(), false, false, 0,
				0);
	}

	public Ball getMove() {
		return new Ball(this.getTopLeftCoordinate().getMoveVelocity(angleOfMovement, speed), this.getWidth(),
				this.getHeight(), speed, angleOfMovement, this.getId(), this.getType());
	}

	public Ball flipXDirection() {
		double cos = Math.cos(angleOfMovement);
		double sin = Math.sin(angleOfMovement);
		double newAngle = Math.atan2(sin, -cos);
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.speed, newAngle,
				this.getId(), this.getType());
	}

	public Ball flipYDirection() {
		double cos = Math.cos(angleOfMovement);
		double sin = Math.sin(angleOfMovement);
		double newAngle = Math.atan2(-sin, cos);
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.speed, newAngle,
				this.getId(), this.getType());
	}

	public Ball changeAngleDegrees(double changeAmount) {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.speed,
				(this.angleOfMovement + Math.toRadians(changeAmount)), this.getId(), this.getType());
	}

	public Ball setPosition(double setX, double setY) {
		return new Ball(new Coordinate(setX, setY), this.getWidth(), this.getHeight(), this.speed, this.angleOfMovement,
				this.getId(), this.getType());
	}

	public Ball setAngleInDegrees(double changeAmount) {
		return new Ball(this.getTopLeftCoordinate(), this.getWidth(), this.getHeight(), this.speed,
				(Math.toRadians(changeAmount)), this.getId(), this.getType());
	}

	public double calculatePercentageOffsetWith(Rectangle r) {
		// Formula is (centerCoordinate of ball / (1/2) r's width)*50 =
		// percentage offset from -50% to +50%
		double offset = this.getCenterCoordinate().getX() - r.getCenterCoordinate().getX();
		return (offset / (0.5 * r.getWidth())) * 50;
	}

	public double getAngleOfMovement() {
		return angleOfMovement;
	}

	public double getAngleInDegrees() {
		return Math.toDegrees(angleOfMovement);
	}

	public double getSpeed() {
		return speed;
	}

	public int getXScore() {
		return xScore;
	}

	public int getYScore() {
		return yScore;
	}

	public boolean getShouldFlipX() {
		return shouldFlipX;
	}

	public boolean getShouldFlipY() {
		return shouldFlipY;
	}

	public Brick getBrickItHit() {
		return brickItHit;
	}

	public Ball getXAdjustment() {
		return yAdjustment;
	}

	public Ball getYAdjustment() {
		return xAdjustment;
	}

	public boolean isHitBrick() {
		return hitBrick;
	}

	public int getBrickCollisionCounter() {
		return brickCollisionCounter;
	}

}
